<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>当当网商品展示页面</title>
<link href="css/global.css" rel="stylesheet" type="text/css" />
<link href="css/layout.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="header"><iframe src="header.html" height="155px" width="960px" frameborder="0"></iframe></div>
<!--中间部分开始-->
<div id="main">
  <div class="dd_index_top_adver"><img src="images/dd_index_top_adver.jpg" alt="通栏广告图片" /></div>
  <div class="current_place">您现在的位置：<a href="index.html">当当图书</a> >> 小说 >> 财经</div>
  <!--左侧菜单开始-->
  <div id="product_left">
  <div id="product_catList">
   <div class="product_catList_top">浏览同级分类</div>
   <div id="product_catList_class"><!--使用javaScript显示图书分类--></div>
   </div>
  <div class="product_catList_end">
  <img src="images/product_01.gif" alt="shopping">
  <img src="images/product_02.gif" alt="shopping">
  </div>
  </div>
  <!--右侧内容开始-->
  <div id="product_storyList">
   <div id="product_storyList_top">
      <ul>
         <li>排序方式</li>
         <li><img src="images/dd_arrow_right.gif" alt="arrow"></li>
         <li><select id="compositor">
           <option>按销量 降序</option>
           <option>按价格 升序</option>
           <option>按价格 降序</option>
           <option>按折扣 升序</option>
           <option>按折扣 降序</option>
           <option>按出版时间 升序</option>
           <option>按出版时间 降序</option>
           <option>按上架时间 升序</option>
           <option>按上架时间 降序</option>
         </select></li>
         <li><img src="images/product_icon_01.gif" alt="icon"></li>
         <li><img src="images/product_icon_02.gif" alt="icon"></li>
         <li><img src="images/product_icon_03.gif" alt="icon"></li>
         <li><img src="images/product_icon_04.gif" alt="icon"></li>
         <li>每页显示的数量</li>
         <li><img src="images/dd_arrow_right.gif" alt="arrow"></li>
         <li><img src="images/product_icon_20.gif" alt="icon"></li>
         <li><img src="images/product_icon_40.gif" alt="icon"></li>
         <li style="float:right; padding-right:10px;"><img src="images/product_page_down.gif" alt="icon"></li>
         <li style="float:right;">第1页</li>
         <li style="float:right;"><img src="images/product_page_up.gif" alt="icon"></li>
      </ul>
      </div>
      <!--图书排列开始-->
   <div class="product_storyList_content">
   <!--列表开始-->
       
   <!--列表开始-->
        
   <!--列表开始-->
        
   <!--列表开始-->
        
    <!--列表开始-->
         
   <div>
       <dl class="product_content_dd">
       <dd><img src="images/OK.gif" alt="ok"></dd>
       <dd>页</dd>
       <dd><input name="page" type="text" value="1" style="width:20px;"></dd>
       <dd>跳转到第</dd>
       <dd><img src="images/next.gif" alt="ok"></dd>
       <dd><ul id="product_page">
         <li><a href="#" class="product_page">1</a></li>
         <li><a href="#" class="product_page">2</a></li>
        <li> <a href="#" class="product_page">3</a></li>
         <li> ...</li>
         <li><a href="#" class="product_page">14</a></li>
         <li><a href="#" class="product_page">15</a></li>
         <li><a href="#" class="product_page">16</a></li>
         </ul>
       <dd><img src="images/product_page_up.gif" alt="ok"></dd>
       </dl>
   </div>
   </div>
  </div>
  <!--右侧内容结束-->
</div>
<!--网站版权部分开始-->
<div id="footer">
<div class="footer_top"><a href="#" target="_parent" class="footer_dull_red">公司简介</a> | <a href="#" target="_parent" class="footer_dull_red">诚证英才</a> | <a href="#" target="_parent" class="footer_dull_red">网站联盟</a> | <a href="#" target="_parent" class="footer_dull_red">百货招商</a> | <a href="#" target="_parent" class="footer_dull_red">交易条款</a></div>
<iframe src="footer.html" height="50px" width="900px" frameborder="0"></iframe></div>
<style>
  .tcn_bg{
    position:fixed;
    top: 0px;
    left: 0px;
    background: rgba(0,0,0,0.5);
    width: 100%;
    height: 100%;
    
  }
  .tcn_content{
    width:500px;
    min-height: 300px;
    background: #fff;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -150px;
    margin-left: -250px;
    /*#f9d8a9*/
    border:2px solid #fe800f;
  } 
  .tcn_content p{
    padding: 40px 10px;
    line-height: 30px;
    font-size: 18px;
    color: #fe800f;
  }
  .tcn_content button{
    width:100px;
    height: 40px;
    line-height: 40px;
    background-color: #f9d8a9;
    border: 0px;
    text-align: center;
    border-radius: 6px;
    color: #fff;
    font-size: 18px;
    box-shadow: 1px 1px 3px #000;
    cursor: pointer;
    outline: none;
    margin: 0px 20px;

  }
  .tcn_content button:hover{
    background-color:#fe800f;
  }
  .tcn_bg h3{
    margin: 0px;
    background-color: #fe800f;
    font-size: 18px;
    line-height: 30px;
    font-weight: normal;
    color: #fff;
  }
  .tcn_bg input{
    display: block;
    width:60%;
    margin:0px auto;
    margin-top: -50px;
    margin-bottom: 50px;
    padding: 5px;
    border-radius: 6px;
    border:1px solid #fe800f;
    outline: none;
  }
  
</style>
<!---弹出层的测试-->
<!-- <div class="tcn_bg" style="display: none;">
    <div class="tcn_content">
         <h3>提示信息</h3>
         <p>您确定要移出购物车吗？</p>
         <button id="btn1">确定</button>
    </div>
</div>
<div class="tcn_bg" style="display: none;">
    <div class="tcn_content">
         <h3>提示信息</h3>
         <p>您确定要移出购物车吗？</p>
         <button id='btn1'>确定</button><button id='btn2'>取消</button>
    </div>
</div>
<div class="tcn_bg" style="display: none;">
    <div class="tcn_content">
         <h3>提示信息</h3>
         <p>您取消订单的理由是？</p>
         <input type="text">
         <button id='btn1'>确定</button>
    </div>
</div> -->
<script>
//type 1警告型 2确认型 3输入框型
//text 弹出层的问题
function my_modal(type,text,callback1,callback2){
  //警告型弹出层
    if(type===1){
      var str='';
      str='<div class="tcn_bg">'+
          '<div class="tcn_content">'+
            '<h3>提示信息</h3>'+
            '<p>'+text+'</p>'+
            '<button id="btn1">确定</button>'+
          '</div>'+
        '</div>';
      var divObj=document.createElement('div');
      divObj.innerHTML=str;
      document.body.appendChild(divObj); 
      //点击确定关闭弹出层
      document.getElementById('btn1').onclick=function(){
        var tcnObj=document.getElementsByClassName('tcn_bg')[0];
        tcnObj.parentNode.removeChild(tcnObj);
      }      
    }
  //确认型弹出框
   if(type===2){
      var str='';
      str='<div class="tcn_bg">'+
          '<div class="tcn_content">'+
            '<h3>提示信息</h3>'+
            '<p>'+text+'</p>'+
            '<button id="btn1">确定</button><button id="btn2">取消</button>'+
          '</div>'+
        '</div>';
      var divObj=document.createElement('div');
      divObj.innerHTML=str;
      document.body.appendChild(divObj); 

      //点击确定关闭弹出层
      document.getElementById('btn1').onclick=function(){
        var tcnObj=document.getElementsByClassName('tcn_bg')[0];
        tcnObj.parentNode.removeChild(tcnObj);
        callback1&&callback1();
      }
      //点击取消的时候关闭
       document.getElementById('btn2').onclick=function(){
        var tcnObj=document.getElementsByClassName('tcn_bg')[0];
        tcnObj.parentNode.removeChild(tcnObj);
        callback2&&callback2();
      }   

    }
  
}

// my_modal(1,'商品添加到购物车成功！');
// if(confirm('确定要取消订单吗？')){
//   //用ajax发送请求 取消订单
// }else{

// };
// my_modal  是第一时间完成的
//  onclick  第二时间完成的  
my_modal(1,'添加购物车成功！');
 console.log(my_modal(2,'确定要取消订单吗？',function(){alert('发送ajax');},function(){alert('用户点击了取消 什么都不用做！')}));

var arr2=[{'image':'images/product_list_01.jpg','name':'私募（首部披露资本博弈秘密的金融小说）','author':'郭现杰','from':'花山文艺出版社','time':'2014年08月','intro':'数年前，在一次股市的多、空之战中，以赵云狄、林康为首的私募基金—金鼎投资，和以王雨龙为首的私募基金，达成锁仓协议分食利益。殊料，以王雨龙为首的私募基金—鑫利投资背信弃义，导致金鼎投资惨败。以至...','save':'13.10','price':10,'mprice':'32.00'},{'image':'images/product_list_02.jpg','name':'私募（首部披露资本博弈秘密的金融小说）','author':'郭现杰','from':'花山文艺出版社','time':'2017年08月','intro':'数年前，在一次股市的多、空之战中，以赵云狄、林康为首的私募基金—金鼎投资，和以王雨龙为首的私募基金，达成锁仓协议分食利益。殊料，以王雨龙为首的私募基金—鑫利投资背信弃义，导致金鼎投资惨败。以至...','save':'13.10','price':30,'mprice':'32.00'},{'image':'images/product_list_03.jpg','name':'私募（首部披露资本博弈秘密的金融小说）','author':'郭现杰','from':'花山文艺出版社','time':'2013年08月','intro':'数年前，在一次股市的多、空之战中，以赵云狄、林康为首的私募基金—金鼎投资，和以王雨龙为首的私募基金，达成锁仓协议分食利益。殊料，以王雨龙为首的私募基金—鑫利投资背信弃义，导致金鼎投资惨败。以至...','save':'13.10','price':20,'mprice':'32.00'}];
//得到时间戳的函数
function get_time(timestr){
  var new_timestr=timestr.replace('年','-').replace('月','');
  var dObj=new Date(new_timestr);
  return dObj.getTime();
}

//product_storyList_content
//给下拉框添加事件 compositor
var sel_c=document.getElementById('compositor');
var list_box=document.getElementsByClassName('product_storyList_content')[0];
sel_c.onchange=function(){
    if(sel_c.value==='按价格 升序'){
        arr2.sort(function(obj1,obj2){
            return obj1.price-obj2.price;
        });
        add_list();
    }
    if(sel_c.value==='按价格 降序'){

        arr2.sort(function(obj1,obj2){
            return obj2.price-obj1.price;
        });
        add_list();
    }
     if(sel_c.value==='按出版时间 降序'){

        arr2.sort(function(obj1,obj2){
            return get_time(obj2.time)-get_time(obj1.time);
        });
        add_list();
    }
     if(sel_c.value==='按出版时间 升序'){

        arr2.sort(function(obj1,obj2){
            return get_time(obj1.time)-get_time(obj2.time);
        });
        add_list();
    }
}

function add_list(){
    var str='';
    for(var i=0;i<arr2.length;i++){
    str+='<div class="product_storyList_content_left">'+
       '<img src="'+arr2[i].image+'" alt="图书列表"></div>'+
          '<div class="product_storyList_content_right">'+
                '<ul>'+
                  '<li class="product_storyList_content_dash"><a href="#" class="blue_14">'+arr2[i].name+'</a></li>'+
                  '<li>顾客评分：<img src="images/star_red.gif" alt="star"><img src="images/star_red.gif" alt="star"><img src="images/star_red.gif" alt="star"><img src="images/star_red.gif" alt="star"><img src="images/star_gray.gif" alt="star"></li>'+
                  '<li>作　者：<a href="#" class="blue_14">'+arr2[i].author+'</a> 著</li>'+
                  '<li>出版社：<a href="#" class="blue_14">'+arr2[i].from+'</a></li>'+
                  '<li>出版时间：'+arr2[i].time+'</li>'+
                  '<li>'+arr2[i].intro+'</li>'+
                  '<li>'+
                  '<dl class="product_content_dd">'+
                  '<dd class="ceshi"><img src="images/product_buy_02.gif" alt="shopping"></dd>'+
                  '<dd><img src="images/product_buy_01.gif" alt="shopping"></dd>'+
                  '<dd>节省：￥'+arr2[i].save+'</dd>'+
                  '<dd>折扣：59折</dd>'+
                  '<dd class="footer_dull_red">￥'+arr2[i].price+'</dd>'+
                   '<dd class="product_content_delete">￥'+arr2[i].mprice+'</dd>'+
                  '</dl>'+
                  　'</li>'+
                  '</ul>'+
                '</div><div class="product_storyList_content_bottom"></div>';
    }

    list_box.innerHTML=str;
}
add_list();


</script>
</body>
</html>
